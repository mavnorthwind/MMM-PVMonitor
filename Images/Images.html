<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Battery Charge / Discharge Demo</title>
    <style>

    </style>
</head>
<body style="background-color: black; color: white;">

    <h3>Loaded dynamically</h3>
    <p>
        <!-- <div id="batteryContainer" data-src="Battery.svg">Loading...</div> -->
         <object id="batteryObject"
                 data="Battery.svg"
                 type="image/svg+xml"
                 style="width: 120px; height: 50px;"></object>
    </p>
    <button onclick="updateBattery(10)">10%</button>
    <button onclick="updateBattery(20)">20%</button>
    <button onclick="updateBattery(40)">40%</button>
    <button onclick="updateBattery(75)">75%</button>
    <button onclick="updateBattery(100)">100%</button>
    <script>

        // async function loadSvg(container) {
        //     const el = document.getElementById(container);

        //     try{
        //         const resp = await fetch(el.dataset.src);
        //         const svgText = await resp.text();
        //         // For debugging only: delay actual loading by 2 seconds
        //         //await new Promise(resolve => setTimeout(resolve, 2000));
        //         el.innerHTML = svgText;
        //     } catch (err) {
        //         console.error("Could not load content:", err);
        //         el.textContent = "Sorry, could not load content.";
        //     }

        //     return el;
        // };

        function updateBattery(p) {
            const svgDoc = document.getElementById('batteryObject').contentDocument;
            const svg = svgDoc.getElementById('battery');

            svg.updateFill(p);
        }

        document.getElementById('batteryObject').addEventListener('load', () => {
            updateBattery(35);
        });
    </script>
</body>
</html>